Script started on Fri 08 Feb 2019 11:35:41 PM UTC
]0;root@lvm:~[?1034h[root@lvm ~]# [H[2J[root@lvm ~]# #!/bin/bash
]0;root@lvm:~[root@lvm ~]# #
]0;root@lvm:~[root@lvm ~]# # –ú–µ—Å—è—Ü 1. –¢–µ–º–∞ 3. –§–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ LVM.
]0;root@lvm:~[root@lvm ~]# #
]0;root@lvm:~[root@lvm ~]# # –ó–∞–¥–∞—á–∏:
]0;root@lvm:~[root@lvm ~]# #
]0;root@lvm:~[root@lvm ~]# # 0. –ó–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å—é —Ä–∞–±–æ—Ç—É —Å –ø–æ–º–æ—â—å—é script
]0;root@lvm:~[root@lvm ~]# # 1. –£–º–µ–Ω—å—à–∏—Ç—å –∏–º–µ—é—â–∏–π—Å—è —Ç–æ–º LogVol00 –¥–æ 8G
]0;root@lvm:~[root@lvm ~]# # 2. –°–¥–µ–ª–∞—Ç—å –∑–µ—Ä–∫–∞–ª—å–Ω—ã–π —Ç–æ–º –¥–ª—è /var
]0;root@lvm:~[root@lvm ~]# # 3. –°–¥–µ–ª–∞—Ç—å —Ç–æ–º –¥–ª—è /home
]0;root@lvm:~[root@lvm ~]# # 4. –ü—Ä–æ–ø–∏—Å–∞—Ç—å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è /var –∏ /home –≤ fstab
]0;root@lvm:~[root@lvm ~]# # 5. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ /home/, —Å–Ω—è—Ç—å —Å–Ω—ç–ø—à–æ—Ç, —É–¥–∞–ª–∏—Ç—å —á–∞—Å—Ç—å —Ñ–∞–π–ª–æ–≤, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è —Å–æ —Å–Ω—ç–ø—à–æ—Ç–∞
]0;root@lvm:~[root@lvm ~]# # 6. * –°–æ–∑–¥–∞—Ç—å —Ç–æ–º btrfs/zfs —Å –∫—ç—à–µ–º –∏ —Å–Ω—ç–ø—à–æ—Ç–∞–º–∏, —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –Ω–∞ –Ω—ë–º –∫–∞—Ç–∞–ª–æ–≥ /opt
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# #
]0;root@lvm:~[root@lvm ~]# # 0. –ó–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å—é —Ä–∞–±–æ—Ç—É —Å –ø–æ–º–æ—â—å—é script
]0;root@lvm:~[root@lvm ~]# echo "–í –ø—Ä–æ—Ü–µ—Å—Å–µ."
–í –ø—Ä–æ—Ü–µ—Å—Å–µ.
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# # 1. –£–º–µ–Ω—å—à–∏—Ç—å –∏–º–µ—é—â–∏–π—Å—è —Ç–æ–º LogVol00 –¥–æ 8G
]0;root@lvm:~[root@lvm ~]# df -hT | grep /$                                                        # –í—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –æ —Ä–∞–∑–¥–µ–ª–µ

#
# === –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
/dev/mapper/VolGroup00-LogVol00 xfs        38G  733M   37G   2% [01;31m[K/[m[K
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# #
]0;root@lvm:~[root@lvm ~]# # === –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
]0;root@lvm:~[root@lvm ~]# #
]0;root@lvm:~[root@lvm ~]# # xfs –Ω–µ–ª—å–∑—è —É–º–µ–Ω—å—à–∏—Ç—å –Ω–∞ –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–º—Å—è —Ç–æ–º–µ.
]0;root@lvm:~[root@lvm ~]# # –î–ª—è —Å–Ω—è—Ç–∏—è –∫–æ–ø–∏–∏ —Ç–æ–º–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ xfsdump :
]0;root@lvm:~[root@lvm ~]# yum install -y xfsdump
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirror.reconn.ru
 * extras: mirror.corbina.net
 * updates: mirror.corbina.net
Resolving Dependencies
--> Running transaction check
---> Package xfsdump.x86_64 0:3.1.7-1.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================================================================================================================================
 Package                                       Arch                                         Version                                            Repository                                  Size
================================================================================================================================================================================================
Installing:
 xfsdump                                       x86_64                                       3.1.7-1.el7                                        base                                       308 k

Transaction Summary
================================================================================================================================================================================================
Install  1 Package

Total download size: 308 k
Installed size: 947 k
Downloading packages:
xfsdump-3.1.7-1.el7.x86_64.rpm                                                                                                                                           | 308 kB  00:00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : xfsdump-3.1.7-1.el7.x86_64 [                                                                                                                                               ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [########                                                                                                                                       ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [##################                                                                                                                             ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [############################                                                                                                                   ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [#####################################                                                                                                          ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [##########################################                                                                                                     ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [####################################################                                                                                           ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [##############################################################                                                                                 ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [#######################################################################                                                                        ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [#################################################################################                                                              ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [###########################################################################################                                                    ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [####################################################################################################                                           ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [#########################################################################################################                                      ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [##############################################################################################################                                 ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [################################################################################################################                               ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [##################################################################################################################                             ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [##########################################################################################################################                     ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [###############################################################################################################################                ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [#######################################################################################################################################        ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [##########################################################################################################################################     ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [############################################################################################################################################   ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64 [#############################################################################################################################################  ] 1/1  Installing : xfsdump-3.1.7-1.el7.x86_64                                                                                                                                                   1/1 
  Verifying  : xfsdump-3.1.7-1.el7.x86_64                                                                                                                                                   1/1 

Installed:
  xfsdump.x86_64 0:3.1.7-1.el7                                                                                                                                                                  

Complete!
]0;root@lvm:~[root@lvm ~]# # –°–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–æ–º –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ / :
]0;root@lvm:~[root@lvm ~]# pvcreate /dev/sdb                                                       # Physical Volume (PV) - —Ä–∞–∑–¥–µ–ª –∏–ª–∏ —Ç–æ–º, –±–∞–∑–æ–≤–∞—è —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è Volume Group
  Physical volume "/dev/sdb" successfully created.
]0;root@lvm:~[root@lvm ~]# vgcreate vg_root /dev/sdb                                               # Volume Group (VG)    - –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã —Ä–µ—Å—É—Ä—Å—ã PV
  Volume group "vg_root" successfully created
]0;root@lvm:~[root@lvm ~]# lvcreate -n lv_root -l 100%FREE /dev/vg_root                            # Logical Volume (LV)  - –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–¥–µ–ª, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —Ä–µ—Å—É—Ä—Å—ã VG
  Logical volume "lv_root" created.
]0;root@lvm:~[root@lvm ~]# mkfs.xfs /dev/vg_root/lv_root                                           # –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –Ω–∞ LV
meta-data=/dev/vg_root/lv_root   isize=512    agcount=4, agsize=655104 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=0, sparse=0
data     =                       bsize=4096   blocks=2620416, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
log      =internal log           bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
]0;root@lvm:~[root@lvm ~]# mount /dev/vg_root/lv_root /mnt                                         # –ü—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å LV –≤ /mnt
]0;root@lvm:~[root@lvm ~]# xfsdump - -J /dev/VolGroup00/LogVol00 | xfsrestore - -J /mnt            # –ü–µ—Ä–µ–¥–∞—Ç—å –¥–∞–º–ø –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ(-), –ø–æ–¥–∞–≤–∏–≤ —Å–æ–∑–¥–∞–Ω–∏–µ inventory(-J) (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å —Ü–µ–ª—å—é –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–º –ø, –≤ —Å–ª—É—á–∞–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è)
xfsrestore: using file dump (drive_simple) strategy
xfsrestore: version 3.1.7 (dump format 3.0)
xfsdump: using file dump (drive_simple) strategy
xfsdump: version 3.1.7 (dump format 3.0)
xfsdump: level 0 dump of lvm:/
xfsdump: dump date: Fri Feb  8 23:36:32 2019
xfsdump: session id: 120d3185-6fb5-4c69-a2b8-da9e7affc45c
xfsdump: session label: ""
xfsrestore: searching media for dump
xfsdump: ino map phase 1: constructing initial dump list
xfsdump: ino map phase 2: skipping (no pruning necessary)
xfsdump: ino map phase 3: skipping (only one dump stream)
xfsdump: ino map construction complete
xfsdump: estimated dump size: 730024832 bytes
xfsdump: creating dump session media file 0 (media 0, file 0)
xfsdump: dumping ino map
xfsdump: dumping directories
xfsrestore: examining media file 0
xfsrestore: dump description: 
xfsrestore: hostname: lvm
xfsrestore: mount point: /
xfsrestore: volume: /dev/mapper/VolGroup00-LogVol00
xfsrestore: session time: Fri Feb  8 23:36:32 2019
xfsrestore: level: 0
xfsrestore: session label: ""
xfsrestore: media label: ""
xfsrestore: file system id: b60e9498-0baa-4d9f-90aa-069048217fee
xfsrestore: session id: 120d3185-6fb5-4c69-a2b8-da9e7affc4Script started on Fri 08 Feb 2019 11:53:13 PM UTC
]0;root@lvm:~[?1034h[root@lvm ~]# echo "–ó–∞–ø–∏—Å—å script –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∞"
–ó–∞–ø–∏—Å—å script –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∞
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# lsblk | grep /$                                                         # –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Ç–æ–º–∞ VolGroup00/LogVol00/
  ‚îú‚îÄVolGroup00-LogVol00 253:0    0    8G  0 lvm  [01;31m[K/[m[K
]0;root@lvm:~[root@lvm ~]# lvremove /dev/vg_root/lv_root -y                                        # –£–¥–∞–ª–∏—Ç—å, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ LV
  Logical volume "lv_root" successfully removed
]0;root@lvm:~[root@lvm ~]# vgremove /dev/vg_root -y                                                #                                      VG
  Volume group "vg_root" successfully removed
]0;root@lvm:~[root@lvm ~]# pvremove /dev/sdb -y                                                    #                                      PV
  Labels on physical volume "/dev/sdb" successfully wiped.
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# # === –ó–∞–¥–∞—á–∞ 1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# # 2. –°–¥–µ–ª–∞—Ç—å –∑–µ—Ä–∫–∞–ª—å–Ω—ã–π —Ç–æ–º –¥–ª—è /var
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# pvcreate /dev/sdc /dev/sdd                                              # –°–æ–∑–¥–∞—Ç—å PV –¥–ª—è —Ç–æ–º–∞ RAID 1
  Physical volume "/dev/sdc" successfully created.
  Physical volume "/dev/sdd" successfully created.
]0;root@lvm:~[root@lvm ~]# vgcreate vg_var /dev/sdc /dev/sdd                                       # –°–æ–∑–¥–∞—Ç—å VG –∏–∑ —ç—Ç–∏—Ö PV
  Volume group "vg_var" successfully created
]0;root@lvm:~[root@lvm ~]# lvcreate -L 950M -m1 -n lv_var vg_var                                   # –°–æ–∑–¥–∞—Ç—å LV –æ–±—ä–µ–º–æ–º 950M, —É—Ä–æ–≤–Ω–µ–º RAID 1, —Å –∏–º–µ–Ω–µ–º lv_var, –≤ vg_var
  Rounding up size to full physical extent 952.00 MiB
  Logical volume "lv_var" created.
]0;root@lvm:~[root@lvm ~]# mkfs.ext4 /dev/vg_var/lv_var                                            # –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É ext4 –Ω–∞ lv_var
mke2fs 1.42.9 (28-Dec-2013)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
60928 inodes, 243712 blocks
12185 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=249561088
8 block groups
32768 blocks per group, 32768 fragments per group
7616 inodes per group
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376

Allocating group tables: 0/8   done                            
Writing inode tables: 0/8   done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: 0/8   done

]0;root@lvm:~[root@lvm ~]# mount /dev/vg_var/lv_var /mnt                                           # –ü—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å lv_var –≤ /mnt/
]0;root@lvm:~[root@lvm ~]# cp -aR /var/* /mnt/                                                     # –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ /var/ –≤ /mnt/ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
]0;root@lvm:~[root@lvm ~]# umount /mnt && mount /dev/vg_var/lv_var /var                            # –û—Ç–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å lv_var –∏–∑ /mnt –∏ –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ /var
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# # === –ó–∞–¥–∞—á–∞ 2 –∑–∞–≤–µ—Ä—à–µ–Ω–∞
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# # 3. –°–¥–µ–ª–∞—Ç—å —Ç–æ–º –¥–ª—è /home
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# lvcreate -n LogVol_Home -L 2G /dev/VolGroup00                           # –°–æ–∑–¥–∞—Ç—å LV LogVol_Home –æ–±—ä–µ–º–æ–º 2G –≤ VolGroup00
  Logical volume "LogVol_Home" created.
]0;root@lvm:~[root@lvm ~]# mkfs.xfs /dev/VolGroup00/LogVol_Home                                    # –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É xfs –Ω–∞ LogVol_Home
meta-data=/dev/VolGroup00/LogVol_Home isize=512    agcount=4, agsize=131072 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=0, sparse=0
data     =                       bsize=4096   blocks=524288, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
log      =internal log           bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
]0;root@lvm:~[root@lvm ~]# mount /dev/VolGroup00/LogVol_Home /mnt/                                 # –ü—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å LogVol_Home –≤ /mnt/
]0;root@lvm:~[root@lvm ~]# cp -aR /home/* /mnt/                                                    # –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ /home/ –≤ /mnt/ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
]0;root@lvm:~[root@lvm ~]# rm -rf /home/*                                                          # –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª–≤ –≤ /home/, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
]0;root@lvm:~[root@lvm ~]# umount /mnt && mount /dev/VolGroup00/LogVol_Home /home/                 # –û—Ç–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å LogVol_Home –∏–∑ /mnt –∏ –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ /home/
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# # === –ó–∞–¥–∞—á–∞ 3 –∑–∞–≤–µ—Ä—à–µ–Ω–∞
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# # 4. –ü—Ä–æ–ø–∏—Å–∞—Ç—å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è /var –∏ /home –≤ fstab
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# df -h /var /home                                                        # –£–±–µ–¥–∏—Ç—å—Å—è –≤ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–∏ /var –∏ /home –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–æ–º–∞—Ö
Filesystem                          Size  Used Avail Use% Mounted on
/dev/mapper/vg_var-lv_var           922M  108M  751M  13% /var
/dev/mapper/VolGroup00-LogVol_Home  2.0G   33M  2.0G   2% /home
]0;root@lvm:~[root@lvm ~]# # –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å–∏ –≤ fstab –¥–ª—è /var –∏ /home
]0;root@lvm:~[root@lvm ~]# echo "`blkid | grep var: | awk '{print $2}'` /var ext4 defaults 0 0" >> /etc/fstab
echo "`blkid | grep Home | awk '{print $2}'` /home xfs defaults 0 0" >> /etc/fstab]0;root@lvm:~[root@lvm ~]# echo "`blkid | grep Home | awk '{print $2}'` /home xfs defaults 0 0" >> /etc/fstab
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# # === –ó–∞–¥–∞—á–∞ 4 –∑–∞–≤–µ—Ä—à–µ–Ω–∞
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# exit                                                                    # –í—ã–π—Ç–∏ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
exit

Script done on Sat 09 Feb 2019 12:01:52 AM UTC
Script started on Sat 09 Feb 2019 12:03:51 AM UTC
]0;root@lvm:~[?1034h[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# echo "–ó–∞–ø–∏—Å—å script –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∞"
–ó–∞–ø–∏—Å—å script –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∞
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# # 5. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ /home/, —Å–Ω—è—Ç—å —Å–Ω—ç–ø—à–æ—Ç, —É–¥–∞–ª–∏—Ç—å —á–∞—Å—Ç—å —Ñ–∞–π–ª–æ–≤, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è —Å–æ —Å–Ω—ç–ø—à–æ—Ç–∞
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# touch /home/file{1..20}                                                 # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å 20 —Ñ–∞–π–ª–æ–≤ –≤ home
]0;root@lvm:~[root@lvm ~]# ls /home/file*                             # –í—ã–≤–µ—Å—Ç–∏ –≤—Å–µ —Ñ–∞–π–ª—ã –≤ /home/ –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è –Ω–∞ file[C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ [C[C[C[C[C[C[C[1@ 
/home/file1   /home/file11  /home/file13  /home/file15  /home/file17  /home/file19  /home/file20  /home/file4  /home/file6  /home/file8
/home/file10  /home/file12  /home/file14  /home/file16  /home/file18  /home/file2   /home/file3   /home/file5  /home/file7  /home/file9
]0;root@lvm:~[root@lvm ~]# lvcreate -L 100MB -s -n home_snap /dev/VolGroup00/LogVol_Home           # –°–æ–∑–¥–∞—Ç—å —Ç–æ–º-—Å–Ω—ç–ø—à–æ—Ç –¥–ª—è /home
  Rounding up size to full physical extent 128.00 MiB
  Logical volume "home_snap" created.
]0;root@lvm:~[root@lvm ~]# lsblk                                                                   # –í—ã–≤–µ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–∏—Ö –¥–∏—Å–∫–∞—Ö –∏ —Ç–æ–º–∞—Ö
NAME                            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda                               8:0    0   40G  0 disk 
‚îú‚îÄsda1                            8:1    0    1M  0 part 
‚îú‚îÄsda2                            8:2    0    1G  0 part /boot
‚îî‚îÄsda3                            8:3    0   39G  0 part 
  ‚îú‚îÄVolGroup00-LogVol00         253:0    0    8G  0 lvm  /
  ‚îú‚îÄVolGroup00-LogVol01         253:1    0  1.5G  0 lvm  [SWAP]
  ‚îú‚îÄVolGroup00-LogVol_Home-real 253:8    0    2G  0 lvm  
  ‚îÇ ‚îú‚îÄVolGroup00-LogVol_Home    253:7    0    2G  0 lvm  /home
  ‚îÇ ‚îî‚îÄVolGroup00-home_snap      253:10   0    2G  0 lvm  
  ‚îî‚îÄVolGroup00-home_snap-cow    253:9    0  128M  0 lvm  
    ‚îî‚îÄVolGroup00-home_snap      253:10   0    2G  0 lvm  
sdb                               8:16   0   10G  0 disk 
sdc                               8:32   0    2G  0 disk 
‚îú‚îÄvg_var-lv_var_rmeta_0         253:2    0    4M  0 lvm  
‚îÇ ‚îî‚îÄvg_var-lv_var               253:6    0  952M  0 lvm  /var
‚îî‚îÄvg_var-lv_var_rimage_0        253:3    0  952M  0 lvm  
  ‚îî‚îÄvg_var-lv_var               253:6    0  952M  0 lvm  /var
sdd                               8:48   0    1G  0 disk 
‚îú‚îÄvg_var-lv_var_rmeta_1         253:4    0    4M  0 lvm  
‚îÇ ‚îî‚îÄvg_var-lv_var               253:6    0  952M  0 lvm  /var
‚îî‚îÄvg_var-lv_var_rimage_1        253:5    0  952M  0 lvm  
  ‚îî‚îÄvg_var-lv_var               253:6    0  952M  0 lvm  /var
sde                               8:64   0    1G  0 disk 
]0;root@lvm:~[root@lvm ~]# rm -f /home/file{11..20}                                                # –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª—ã —Å file11 –ø–æ file20
]0;root@lvm:~[root@lvm ~]# ls /home/file*                            
3_File                              anaconda-ks.cfg                     .bash_profile                       original-ks.cfg                     
3_File Systems and LVM.script       .bash_history                       .bashrc                             .ssh/                               
3_File Systems and LVM.script.bkp3  .bash_logout                        .cshrc                              .tcshrc                             
[root@lvm ~]# ls /home/file*                            
3_File                              anaconda-ks.cfg                     .bash_profile                       original-ks.cfg                     
3_File Systems and LVM.script       .bash_history                       .bashrc                             .ssh/                               
3_File Systems and LVM.script.bkp3  .bash_logout                        .cshrc                              .tcshrc                             
[root@lvm ~]# ls /home/file*                            
3_File                              anaconda-ks.cfg                     .bash_profile                       original-ks.cfg                     
3_File Systems and LVM.script       .bash_history                       .bashrc                             .ssh/                               
3_File Systems and LVM.script.bkp3  .bash_logout                        .cshrc                              .tcshrc                             
[root@lvm ~]# ls /home/file*                            
3_File                              anaconda-ks.cfg                     .bash_profile                       original-ks.cfg                     
3_File Systems and LVM.script       .bash_history                       .bashrc                             .ssh/                               
3_File Systems and LVM.script.bkp3  .bash_logout                        .cshrc                              .tcshrc                             
[root@lvm ~]# ls /home/file*                            
3_File                              anaconda-ks.cfg                     .bash_profile                       original-ks.cfg                     
3_File Systems and LVM.script       .bash_history                       .bashrc                             .ssh/                               
3_File Systems and LVM.script.bkp3  .bash_logout                        .cshrc                              .tcshrc                             
[root@lvm ~]# ls /home/file*                            
3_File                              anaconda-ks.cfg                     .bash_profile                       original-ks.cfg                     
3_File Systems and LVM.script       .bash_history                       .bashrc                             .ssh/                               
3_File Systems and LVM.script.bkp3  .bash_logout                        .cshrc                              .tcshrc                             
[root@lvm ~]# ls /home/file*                            # –í—ã–≤–µ—Å—Ç–∏ –≤—Å–µ —Ñ–∞–π–ª—ã –≤ /home/ –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è –Ω–∞ file[C[C[C[C[C[C[C[C[C[C[C[C[C[C
/home/file1  /home/file10  /home/file2  /home/file3  /home/file4  /home/file5  /home/file6  /home/file7  /home/file8  /home/file9
]0;root@lvm:~[root@lvm ~]# umount /home                                                            # –û—Ç–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å /home
umount: /home: target is busy.
        (In some cases useful info about processes that use
         the device is found by lsof(8) or fuser(1))
]0;root@lvm:~[root@lvm ~]# umount /home                                                            # –û—Ç–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å /home
umount: /home: target is busy.
        (In some cases useful info about processes that use
         the device is found by lsof(8) or fuser(1))
]0;root@lvm:~[root@lvm ~]# echo ""–û"—Å"—Ç"–∞"–Ω"–æ"–≤"–∫"–∞" "–ª"–æ"–≥"–∏"—Ä"–æ"–≤"–∞"–Ω"–∏"—è" "s"c"r"i"p"t"." "–ù"–µ"–æ"–±"—Ö"–æ"–¥"–∏"–º"–∞" "—Å"–º"–µ"–Ω"–∞" "–ø"–æ"–ª"—å"–∑"–æ"–≤"–∞"—Ç"–µ"–ª"—è"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"–æ" "—Å"–º"–µ"–Ω"–∏"—Ç"—å" "–ø"–æ"–ª"—å"–∑"–æ"–≤"–∞"—Ç"–µ"–ª"—è"," "–≤"–º"–µ"—Å"—Ç"–æ" "–∏"—Å"–ø"–æ"–ª"—å"–∑"–æ"–≤"–∞"–Ω"–∏"—è" "–ø"—Ä"–∏"–≤"–µ"–ª"–µ"–≥"–∏"—Ä"–æ"–≤"–∞"–Ω"–Ω"–æ"–≥"–æ" "—Ä"–µ"–∂"–∏"–º"–∞"."[C
–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è script. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–º–µ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏–≤–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞.
]0;root@lvm:~[root@lvm ~]# —É—á—à–µ[K[K[K[Kexit
exit

Script done on Sat 09 Feb 2019 12:14:03 AM UTC
Script started on Sat 09 Feb 2019 12:21:00 AM UTC
]0;root@lvm:~[?1034h[root@lvm ~]# echo ""–ë"—ã"–ª" "–≤"—ã"–ø"–æ"–ª"–Ω"–µ"–Ω" "–≤"—Ö"–æ"–¥" "–æ"—Ç" "–ø"–æ"–ª"—å"–∑"–æ"–≤"–∞"—Ç"–µ"–ª"—è" "r"o"o"t"/"[1P"."[C "–†"–∞"–±"–æ"—Ç"–∞" "–æ"—Å"—Ç"–∞"[1P"[1P"[1P"[1P"–¥"[1P"–ø"—Ä"–æ"—á"–∏"—Ö" "–ø"–æ"–ª"—å"–∑"–æ"–≤"–∞"—Ç"–µ"–ª"–µ"–π"," "–∏"—Å"–ø"–æ"–ª"—å"–∑"—É"—é"—â"–∏"–π" "–ø"–∞"–ø"[1P"[1P"[1P"[1P"[1P"—Ö" "–ø"–∞"–ø"–∫"—É" "/"h"o"m"e"[C[C[1P /home"[1P /home"[1P /home"[1P /home"[1P /home"–¥ /home"–∏ /home"—Ä /home"–µ /home"–∫ /home"—Ç /home"–æ /home"—Ä /home"–∏ /home"—é /home"[C[C[C[C[C[C[C "–∑"–∞"–≤"–µ"—Ä"—à"–µ"–Ω"–∞"."[C
–ë—ã–ª –≤—ã–ø–æ–ª–Ω–µ–Ω –≤—Ö–æ–¥ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è root. –†–∞–±–æ—Ç–∞ –ø—Ä–æ—á–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é /home –∑–∞–≤–µ—Ä—à–µ–Ω–∞.
]0;root@lvm:~[root@lvm ~]# ls /home/file*                            
3_File                              3_File Systems and LVM.script.bkp4  .bash_logout                        .cshrc                              .tcshrc
3_File Systems and LVM.script       anaconda-ks.cfg                     .bash_profile                       original-ks.cfg                     
3_File Systems and LVM.script.bkp3  .bash_history                       .bashrc                             .ssh/                               
[root@lvm ~]# ls /home/file*                            
3_File                              3_File Systems and LVM.script.bkp4  .bash_logout                        .cshrc                              .tcshrc
3_File Systems and LVM.script       anaconda-ks.cfg                     .bash_profile                       original-ks.cfg                     
3_File Systems and LVM.script.bkp3  .bash_history                       .bashrc                             .ssh/                               
[root@lvm ~]# ls /home/file*                            
3_File                              3_File Systems and LVM.script.bkp4  .bash_logout                        .cshrc                              .tcshrc
3_File Systems and LVM.script       anaconda-ks.cfg                     .bash_profile                       original-ks.cfg                     
3_File Systems and LVM.script.bkp3  .bash_history                       .bashrc                             .ssh/                               
[root@lvm ~]# ls /home/file*                            
3_File                              3_File Systems and LVM.script.bkp4  .bash_logout                        .cshrc                              .tcshrc
3_File Systems and LVM.script       anaconda-ks.cfg                     .bash_profile                       original-ks.cfg                     
3_File Systems and LVM.script.bkp3  .bash_history                       .bashrc                             .ssh/                               
[root@lvm ~]# ls /home/file*                            
3_File                              3_File Systems and LVM.script.bkp4  .bash_logout                        .cshrc                              .tcshrc
3_File Systems and LVM.script       anaconda-ks.cfg                     .bash_profile                       original-ks.cfg                     
3_File Systems and LVM.script.bkp3  .bash_history                       .bashrc                             .ssh/                               
[root@lvm ~]# ls /home/file*                            
3_File                              3_File Systems and LVM.script.bkp4  .bash_logout                        .cshrc                              .tcshrc
3_File Systems and LVM.script       anaconda-ks.cfg                     .bash_profile                       original-ks.cfg                     
3_File Systems and LVM.script.bkp3  .bash_history                       .bashrc                             .ssh/                               
[root@lvm ~]# ls /home/file*                            # –í—ã–≤–µ—Å—Ç–∏ –≤—Å–µ —Ñ–∞–π–ª—ã –≤ /home/ –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è –Ω–∞ file
/home/file1  /home/file10  /home/file2  /home/file3  /home/file4  /home/file5  /home/file6  /home/file7  /home/file8  /home/file9
]0;root@lvm:~[root@lvm ~]# umount /home                                                            # –û—Ç–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å /home
]0;root@lvm:~[root@lvm ~]# lvconvert --merge /dev/VolGroup00/home_snap                             # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è —Å–æ —Å–Ω–∏–º–∫–∞ home_snap (—Å–Ω–∏–º–æ–∫ –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω)
  Merging of volume VolGroup00/home_snap started.
  VolGroup00/LogVol_Home: Merged: 100.00%
]0;root@lvm:~[root@lvm ~]# mount /home                                                             # –ü—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å /home
]0;root@lvm:~[root@lvm ~]# –¥—ã [K[K[Kls /home/files[K*                                                          # –í—ã–≤–µ—Å—Ç–∏ –≤—Å–µ —Ñ–∞–π–ª—ã –≤ /home/ –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è –Ω–∞ file
/home/file1   /home/file11  /home/file13  /home/file15  /home/file17  /home/file19  /home/file20  /home/file4  /home/file6  /home/file8
/home/file10  /home/file12  /home/file14  /home/file16  /home/file18  /home/file2   /home/file3   /home/file5  /home/file7  /home/file9
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# # === –ó–∞–¥–∞—á–∞ 5 –∑–∞–≤–µ—Ä—à–µ–Ω–∞
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# # === –ë–∞–∑–æ–≤–∞—è —á–∞—Å—Ç—å –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞.
]0;root@lvm:~[root@lvm ~]# 
]0;root@lvm:~[root@lvm ~]# exit                                                                    # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏ script
exit

Script done on Sat 09 Feb 2019 12:24:29 AM UTC
